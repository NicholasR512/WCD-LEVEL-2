<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Messages</title>
</head>
<%- include('../partials/header.ejs') %>
<%- include('../partials/errorMessage.ejs') %>
<body>
    <h1>Messages</h1>
    <% if (messages.length === 0) { %>
        <p>No messages to display.</p>
    <% } else { %>
        <% messages.forEach(msg => { %>
            <div>
                <h3>Subject: <%= msg.subject %></h3>
                <p><strong>From:</strong> <%= msg.userEmail %></p>
                <p><%= msg.message %></p>
                <p><small>Sent on: <%= msg.createdAt.toLocaleString() %></small></p>
                <form action="/admin/messages/<%= msg._id %>?_method=DELETE" method="POST" style="display:inline;">
                    <button type="submit" onclick="return confirm('Are you sure you want to delete this message?')">Delete</button>
                </form>
            </div>
            <hr>
        <% }) %>        
    <% } %>
</body>
</html>
